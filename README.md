# HTTP_MQTT_WIFI_BASIC

博客说明:

https://www.cnblogs.com/post/readauth?url=/kekeoutlook/p/9825439.html

现有功能：
1配置部分
1 上电前5秒内，长按超过2s，进入配网模式。

2 搜索无线网络 lovelamp_xxxxxxx 密码同WIFI名。手机或者电脑连接。

3 打开手机或电脑网页

普通用户：192.168.4.1   进入连接WIFI账号和密码配置。

  普通WIFI直接输入账号密码连接



 

 网页认证上网模式的路由器，需要电脑抓包截取认证时候向服务器提交的表单，粘贴在上网密钥里



例如，西工大的校园无线网路

WIFI名称：NWPU-CHANGAN

登录网址：https://222.24.215.2/srun_portal_pc.php

上网密钥：下图第五个数据  Form Data



 

 

 

开发者：    192.168.4.1/mqtt  进入mqtt服务器配置页面。



输入服务器地址

输入端口  （默认1883）

 

入网ID，每一个MQTT连接设备有一个唯一ID，也用于生成唯一通信话题，

入网账号;  MQTT服务器分配的账号密码，存在配置文件里。唯一

入网密码：MQTT服务器分配的账号密码，存在配置文件里。唯一

 （为了方便，上述三个设置为一样的，出厂默认 love_00001_x）

通信话题：  用于MQTT信息交互。

 （出厂默认 lovelamp/love_00001_x ）     

芯片自动补齐/r和/s： 

接受话题  lovelamp/love_00001_x/r

发送话题  lovelamp/love_00001_x/s

配置结束后，重启生效。
2 工作部分
上电前5秒没有长按，自动连接上次记录的WIFI和MQTT服务器。

接收数据直接串口打印出来。

具体逻辑代码，写个解析函数并执行相应动作。


未来加入:
1 json数据解析mqtt来的消息
2 解析后执行逻辑控制（灯，传感器，，，，，）
